#!/bin/bash

wget https://raw.githubusercontent.com/laylavish/uBlockOrigin-HUGE-AI-Blocklist/refs/heads/main/noai_hosts.txt
if [ ! -f noai_hosts.txt ]; then
    exit 0
fi

TEMPFILENAME=noai_hosts.txt.tmp
CW_FILENAME=cwlists/ai_generated.json
grep "0.0.0.0" noai_hosts.txt | awk -F ' ' '{print $2}' > $TEMPFILENAME

{ echo "{";
  echo "    \"name\": \"AI Generated Content\",";
  echo "    \"warning\": \"AI Generated Content\",";
  echo "    \"description\": \"Typically images generated by 'AI' generative models\",";
  echo "    \"words\": [],";
  echo "    \"hashtags\": [],";
  echo "    \"domains\": ["; } > $CW_FILENAME

while IFS= read -r line
do
    linestr=$(echo "${line}" | sed 's/\r$//')
    if [[ "${linestr}" != "www."* ]]; then
        linestr2="        \"/${linestr}\","
        echo "${linestr2}" >> $CW_FILENAME
        linestr2="        \".${linestr}\","
        echo "${linestr2}" >> $CW_FILENAME
    else
        linestr2="        \"${linestr}\","
        echo "${linestr2}" >> $CW_FILENAME
    fi
done < $TEMPFILENAME

{ echo "    ]";
  echo "}"; } >> $CW_FILENAME
rm $TEMPFILENAME
rm noai_hosts.txt
